

{%- macro render_pagination(pagination, url_for_param=None) -%}
	{%- set agg_dict = merge_dicts(request.args, kwargs) -%}

	<div class=pagination>
	{%- for page in pagination.iter_pages() -%}
		{%- if page -%}
			{% if page != pagination.page %}
				{% if url_for_param %}
					<a href="{{ url_for(url_for_param, page=page, **agg_dict) }}">{{ page }}</a>
				{% else %}
					<a href="{{ page }}">{{ page }}</a>
				{% endif %}
			{% else %}
				<strong>{{ page }}</strong>
			{% endif %}
		{%- else -%}
			<span class=ellipsis>â€¦</span>
		{%- endif -%}
	{%- endfor -%}
	</div>
{%- endmacro -%}

{%- macro createReaderLink(itemName, itemInfo) -%}
	{%- if itemInfo == None or itemInfo["item"] == None -%}
		{%- if itemName -%}
			{{itemName}}
		{%- else -%}
			No series name?
		{%- endif -%}
	{%- else -%}
		<a href='/reader/by-series/{{itemInfo['dirKey'] | urlencode}}'>{{itemName}}</a>
	{%- endif -%}
</%def>


{%- endmacro -%}


{%- macro mouseOverJs(key='showTT') -%}

		// Yeah, apparently you can have raw js in
		// mako functions.

		$(document).ready(function() {
		// Tooltip only Text
		$('.{{key}}').hover(function(e){
			// Hover over code
			var mouseovertext = $(this).attr('mouseovertext');
			var mousex = e.pageX + 20; //Get X coordinates
			var mousey = e.pageY + 10; //Get Y coordinates
			$(this).data('tipText', mouseovertext).removeAttr('mouseovertext');
			$('<p class="tooltip"></p>')
			.html(mouseovertext)
			.css({ top: mousey, left: mousex, position:'absolute', display:'block', opacity: 1  })
			.appendTo('body');
		}, function() {
			// Hover out code
			$(this).attr('mouseovertext', $(this).data('tipText'));
			$('.tooltip').remove();
		}).mousemove(function(e) {
			var mousex = e.pageX + 20; //Get X coordinates
			var mousey = e.pageY + 10; //Get Y coordinates
			$('.tooltip')
			.css({ top: mousey, left: mousex, position:'absolute'  })
		});
		});

{%- endmacro -%}
